- name: Build pages
  run: |
    HEADER="$(cat src/templates/header.html)"
    FOOTER="$(cat src/templates/footer.html)"

    for file in src/md/*.md; do
      NAME=$(basename "$file" .md)

      if [ "$NAME" = "index" ]; then
        TITLE="Welcome"
      else
        TITLE="$(tr '[:lower:]' '[:upper:]' <<< ${NAME:0:1})${NAME:1}"
      fi

      pandoc "$file" \
        --template=src/templates/page.html \
        --metadata title="$TITLE" \
        --metadata hero="assets/images/hero-$NAME.jpg" \
        --metadata header="$HEADER" \
        --metadata footer="$FOOTER" \
        --output "$NAME.html"
    done

